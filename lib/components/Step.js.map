{"version":3,"sources":["../../src/components/Step.js"],"names":["defaultData","x","y","z","rotateX","rotateY","rotateZ","scale","Step","props","className","duration","state","id","gtepID","data","getData","isPresented","initStep","nextProps","activeStep","setState","$set","e","goto","target","classList","contains","document","documentElement","parentNode","move","Date","getTime","toString","rotate","_stepStyle","position","transform","transformStyle","children","_stepClassName","getClassName","getStyle","handleClick","bind"],"mappings":"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","file":"Step.js","sourcesContent":["import React, { Component } from 'react';\nimport update from 'react/lib/update';\nimport { toNumber, translate, rotate, scale } from './util';\n\nconst defaultData = {\n  x: 0,\n  y: 0,\n  z: 0,\n  rotateX: 0,\n  rotateY: 0,\n  rotateZ: 0,\n  scale: 1\n};\n\nexport default class Step extends Component {\n    constructor(props){\n        super(props);\n\n        const { className, duration } = this.props;\n        \n        this.state = {\n            id: this.gtepID(),\n            className: className ? (\"step \" + className ) : \"step\",\n            data: this.getData(),\n            duration: duration ? duration : 1000,\n            isPresented: false\n        };\n    }\n    componentDidMount(){\n        const { initStep } = this.props;\n        \n        initStep( this.state );\n    }\n    componentWillReceiveProps( nextProps ){\n        const { id, isPresented } = this.state;\n\n        if ( id === nextProps.activeStep.id && !isPresented ) \n            this.setState( update( this.state, {\n                isPresented: {\n                    $set: true\n                }\n            }));\n    }\n    \n    // Step's Event\n    handleClick(e){\n        const { goto } = this.props;\n        let target = e.target;\n        \n        while( !target.classList.contains('step') &&\n               !target.classList.contains('active') &&\n               !target.classList.contains('oi-step-element') &&\n                target !== document.documentElement) {\n          target = target.parentNode;          \n        }\n        \n        if (target !== document.documentElement)\n            if ( target.classList.contains('step') )\n                goto( this.state, this.state.duration );\n    }\n    \n    // Step's ID, ClassName, Style\n    gtepID(){\n        const { id } = this.props;\n        \n        const move = new Date().getTime().toString();\n        return id || (\"step-\" + move);\n    }\n    getData(){\n        const { data } = this.props;\n        \n        return data? {\n            x: toNumber( data.x ),\n            y: toNumber( data.y ),\n            z: toNumber( data.z ),\n            rotateX: toNumber( data.rotateX ),\n            rotateY: toNumber( data.rotateY ),\n            rotateZ: toNumber( data.rotateZ || data.rotate ),\n            scale: toNumber( data.scale, 1 )\n        } : defaultData;\n    }\n    \n    getStyle(){\n        const { data } = this.state;\n        \n        let _stepStyle = {\n                position: 'absolute',\n                transform: 'translate(-50%, -50%) ',\n                transformStyle: 'preserve-3d'\n            };\n            \n        _stepStyle.transform += translate( data ? data : defaultData ) + \n                                rotate( data ? data : defaultData ) + \n                                scale( data.scale ? data.scale : defaultData ) ;\n            \n        \n        return _stepStyle;\n    }\n    getClassName(){\n        const { activeStep } = this.props;\n        const { id, className, isPresented } = this.state;\n        \n        if ( id === activeStep.id )\n            return className + \" active present\";\n        else\n            if ( isPresented )\n                return className + \" past\";\n            else\n                return className + \" future\";\n    }\n    render() {\n        const { children } = this.props;\n        const { id } = this.state;\n        \n        const _stepClassName = this.getClassName();\n        const _stepStyle = this.getStyle();\n        \n        return (\n            <div id={ id } \n                 className={ _stepClassName } \n                 style={ _stepStyle } \n                 onClick={ this.handleClick.bind(this) }>\n                { children }\n            </div>\n        );\n    }\n}"]}